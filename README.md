# Проект. Поиск вакансий в сервисе HH.ru

## Введение
Курсовая работа представляет собой возможность закрепить знания, полученные 
в рамках модуля, и создать полноценный проект, который можно добавить в портфолио. 
В данном проекте мы будем работать с API и библиотекой `requests` 
для интеграции с внешним сервисом.

## Задача проекта
Целью данного проекта является создание приложения для поиска вакансий. 
Приложение будет интегрироваться с внешним сервисом через API, 
что позволит получать данные о вакансиях и предоставлять их пользователям 
в унифицированном виде.

## Интеграция с внешним сервисом
Интеграция — это процесс объединения данных, находящихся в различных источниках, 
и предоставления их пользователям в удобном формате. 
В данном проекте мы будем работать с API, 
который позволяет различным программам взаимодействовать друг с другом, 
используя набор определенных правил.

### Что такое API?
API (Application Programming Interface) — это механизм, 
который позволяет различным программам взаимодействовать друг с другом. 
Подробнее про API можно прочитать в статье «Что такое API» на сайте 
[Timeweb](https://timeweb.com/ru/).

## Использование библиотеки `requests`
Для интеграции с внешним сервисом через API нам понадобится 
библиотека `requests`. 
Эта библиотека упрощает процесс отправки HTTP-запросов и получения ответов от сервера.

# Описание класса для работы с файлами

## Введение

В данном модуле представлены два класса: `FileHandlerBase` и `FileHandlerJob`. Класс `FileHandlerBase` является абстрактным и определяет интерфейс для работы с файлами. Класс `FileHandlerJob` наследуется от `FileHandlerBase` и реализует конкретные методы для работы с JSON-файлами, содержащими данные о вакансиях.

## Класс `FileHandlerBase`

### Описание

`FileHandlerBase` — это абстрактный класс, который определяет методы, которые должны быть реализованы в наследуемых классах. Он использует модуль `abc` для создания абстрактных методов.

### Методы

- **`write(self, text: list) -> None`**: Абстрактный метод для записи данных в файл.
- **`open_file(self) -> None`**: Абстрактный метод для открытия файла.
- **`add_vacancy(self, list_vacancy_hh: list[Vacancy]) -> None`**: Абстрактный метод для добавления вакансий в файл.
- **`delete_vacancy(self, vacancy: Vacancy) -> None`**: Абстрактный метод для удаления вакансии из файла.

## Класс `FileHandlerJob`

### Описание

`FileHandlerJob` — это конкретный класс, который наследуется от `FileHandlerBase` и реализует методы для работы с JSON-файлами. Он использует модуль `json` для работы с JSON-данными и модуль `os.path` для проверки существования файла.

### Атрибуты

- **`filename: str`**: Имя файла, с которым работает класс.
- **`data_file: list`**: Список, содержащий данные, загруженные из файла.

### Методы

- **`__init__(self, filename: str = "job_hh.json")`**: Конструктор класса. Инициализирует атрибуты `filename` и `data_file`. Вызывает метод `open_file` для открытия файла.

- **`open_file(self) -> None`**: Метод для открытия файла. Если файл существует, он загружает данные из файла в атрибут `data_file`. Если файл не существует, он создает пустой файл.

- **`write(self, text: list[dict]) -> None`**: Метод для записи данных в файл. Преобразует данные в формат JSON и записывает их в файл. Обновляет атрибут `data_file`.

- **`add_vacancy(self, list_vacancy_hh: list[Vacancy]) -> None`**: Метод для добавления вакансий в файл. Преобразует список объектов `Vacancy` в список словарей и вызывает метод `write` для записи данных в файл.

- **`delete_vacancy(self, vacancy: Vacancy) -> None`**: Метод для удаления вакансии из файла. Ищет вакансию по идентификатору и удаляет её из `data_file`. Затем вызывает метод `write` для записи обновленных данных в файл.

# Описание классов для работы с API HeadHunter

## Введение

В данном модуле представлены два класса: `HhBase` и `HH`. Класс `HhBase` является абстрактным и определяет интерфейс для работы с API HeadHunter. Класс `HH` наследуется от `HhBase` и реализует конкретные методы для загрузки вакансий с сайта HeadHunter.

## Класс `HhBase`

### Описание

`HhBase` — это абстрактный класс, который определяет методы, которые должны быть реализованы в наследуемых классах. Он использует модуль `abc` для создания абстрактных методов.

### Методы

- **`load_vacancies(self, keyword: str) -> list`**: Абстрактный метод для загрузки вакансий по ключевому слову.

## Класс `HH`

### Описание

`HH` — это конкретный класс, который наследуется от `HhBase` и реализует методы для работы с API HeadHunter. Он использует модуль `requests` для отправки HTTP-запросов к API.

### Атрибуты

- **`__url: str`**: URL-адрес API HeadHunter.
- **`__headers: dict`**: Заголовки запроса, включая `User-Agent`.
- **`__params: dict`**: Параметры запроса, включая `text`, `page` и `per_page`.
- **`__vacancies: list`**: Список загруженных вакансий.

### Методы

- **`__init__(self) -> None`**: Конструктор класса. Инициализирует атрибуты `__url`, `__headers`, `__params` и `__vacancies`. Вызывает конструктор родительского класса.

- **`load_vacancies(self, keyword: str) -> list[Any]`**: Метод для загрузки вакансий по ключевому слову. Устанавливает параметр `text` в `__params` и отправляет запросы к API до тех пор, пока не будет загружено 2 страницы вакансий. Возвращает список загруженных вакансий.

# Описание классов для работы с вакансиями

## Введение

В данном модуле представлены два класса: `BaseVacancy` и `Vacancy`. Класс `BaseVacancy` является абстрактным и определяет интерфейс для работы с вакансиями. Класс `Vacancy` наследуется от `BaseVacancy` и реализует конкретные методы для работы с данными о вакансиях.

## Класс `BaseVacancy`

### Описание

`BaseVacancy` — это абстрактный класс, который определяет методы, которые должны быть реализованы в наследуемых классах. Он использует модуль `abc` для создания абстрактных методов.

### Методы

- **`get_vacancy(list_hh_vacancy: list) -> list["Vacancy"]`**: Абстрактный статический метод для получения списка вакансий из списка данных.
- **`to_dict(self) -> dict`**: Абстрактный метод для преобразования объекта вакансии в словарь.

## Класс `Vacancy`

### Описание

`Vacancy` — это конкретный класс, который наследуется от `BaseVacancy` и реализует методы для работы с данными о вакансиях. Он использует `__slots__` для оптимизации памяти.

### Атрибуты

- **`id_vacancy: str`**: Идентификатор вакансии.
- **`name: str`**: Название вакансии.
- **`url: str`**: URL-адрес вакансии.
- **`salary_from: float`**: Нижняя граница зарплаты.
- **`salary_to: float`**: Верхняя граница зарплаты.
- **`requirement: str`**: Требования к вакансии.

### Методы

- **`__init__(self, id_vacancy: str, name: str, url: str, salary_from: float, salary_to: float, requirement: str)`**: Конструктор класса. Инициализирует атрибуты вакансии.

- **`__str__(self) -> str`**: Переопределение магического метода `__str__` для удобного вывода информации о вакансии.

- **`get_vacancy(list_hh_vacancy: list) -> list["Vacancy"]`**: Статический метод для получения списка объектов `Vacancy` из списка данных. Преобразует данные из списка словарей в объекты `Vacancy`.

- **`to_dict(self) -> dict`**: Метод для преобразования объекта вакансии в словарь. Возвращает словарь с атрибутами вакансии.


# Установка
> Для начала работы с проектом выполните следующие шаги:

### Клонирование репозитория
Склонируйте репозиторий на ваш компьютер

```git clone https://github.com/ваш-username/ваш-репозиторий.git```

### Установка Poetry
Если у вас еще не установлен Poetry, выполните следующую команду указанную на официальном сайте
[Poetry](https://python-poetry.org/docs/#installing-with-the-official-installer)

После установки добавьте [Poetry](https://python-poetry.org/docs/#installing-with-the-official-installer) в PATH, если это не произошло автоматически:

```export PATH="$HOME/.local/bin:$PATH"```

### Установка зависимостей
Используйте [Poetry](https://python-poetry.org/docs/#installing-with-the-official-installer) для создания виртуального окружения и установки 
зависимостей (включая инструменты для разработки, 
такие как flake8, isort, black и mypy):

poetry install

### Активация виртуального окружения
**Активируйте виртуальное окружение [Poetry](https://python-poetry.org/docs/#installing-with-the-official-installer) в зависимости от версии**

# Лицензия
MIT